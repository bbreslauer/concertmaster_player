<!DOCTYPE html>
<html>
<head>
    <title>Concertmaster Data</title>
    <script type="text/javascript" src="/js/ua-parser-min.js"></script>
    <script type="text/javascript" src="/js/jquery.js"></script>
    <script type="text/javascript" src="/js/jquery.mousewheel.js"></script>
    <script type="text/javascript" src="/js/jquery.leanModal.min.js"></script>
    <script type="text/javascript" src="/js/html.sortable.0.1.3.js"></script>
    <script type="text/javascript" src="/js/toggles.min.js"></script>
    <link href="/js/select2/css/select2.css" rel="stylesheet" />
    <script src="/js/select2/js/select2.js"></script>
    <script src="/js/js-md5.js"></script>
    <script type="text/javascript" src="/js/lib.js"></script>
    <script type="text/javascript" src="/js/datalib.js"></script>

    <style type="text/css">
        @import url("/css/main.css");
        @import url("/css/data.css");
        @import url("/css/toggles-full.css");
    </style>
</head>
<body class="data">
    <div id="loader">
        <div id="loaderwindow">
            <h1>Logo</h1>
            <h2>Concertmaster Data</h2>
            <h3 id="version"></h3>
            <h4>Loading<span class="blink">...</span></h4>
            <p>&copy; <span id="year"></span> Concertmaster. All rights reserved.</p>
        </div>
    </div>
    <div id="toolbar">
        <span class="logo">Concertmaster</span>
    </div>

    <div id="sidebar">
        <div id="nowplaying">
            <div id="recording">
                <h2>Recording</h2>
                <ul id="playerinfo"></ul>
                <ul id="playertracks"></ul>
            </div>
            <div id="composer">
                <h2>Composer</h2>
                <form>
                    <label for="name">Name:</label>
                    <input type="text" name="name" class="composer" />
                    <label for="complete_name">Complete name:</label>
                    <input type="text" name="complete_name" />
                    <label for="birth">Birth:</label>
                    <input type="text" name="birth" />
                    <label for="Death">Death:</label>
                    <input type="text" name="death" />
                    <label for="epoch">Epoch:</label>
                    <select class="periods">
                        <option value="choose">Choose epoch</option>
                        <option value="Medieval">Medieval</option>
                        <option value="Renaissance">Renaissance</option>
                        <option value="Baroque">Baroque</option>
                        <option value="Classical">Classical</option>
                        <option value="Early Romantic">Early Romantic</option>
                        <option value="Romantic">Romantic</option>
                        <option value="Late Romantic">Late Romantic</option>
                        <option value="20th Century">20th Century</option>
                        <option value="Post-War">Post-War</option>
                        <option value="21st Century">21st Century</option>
                    </select>
                    <input type="hidden" name="id" />
                    <button>Action</button>
                </form>
            </div>
        </div>
    </div>

    <div id="main">
        <h2>Composers & Works</h2>
        <div id="library">
            <ul id="atoz">
                <li><a href="javascript:cmas_composersbyname('all')">All</a></li>
                <li><a class="favorite" href="javascript:cmas_composersbyfav()">fav</a></li>
            </ul>
            <select class="periods">
                <option value="all">All periods</option>
                <option value="Medieval">Medieval</option>
                <option value="Renaissance">Renaissance</option>
                <option value="Baroque">Baroque</option>
                <option value="Classical">Classical</option>
                <option value="Early Romantic">Early Romantic</option>
                <option value="Romantic">Romantic</option>
                <option value="Late Romantic">Late Romantic</option>
                <option value="20th Century">20th Century</option>
                <option value="Post-War">Post-War</option>
                <option value="21st Century">21st Century</option>
            </select>
            <input type="text" id="composersearch" placeholder="Composer search" />
        </div>
        <script type="text/javascript">
            var alphabet = "abcdefghijklmnoprstvwxyz".split("");
            for (letter in alphabet)
            {
              $('#atoz').append('<li><a href="javascript:cmas_composersbyname(\''+alphabet[letter]+'\')">'+alphabet[letter]+'</a></li>');
            }
        </script>
        <ul id="composers"></ul>
        <div id="genresworks">
            <h2></h2>
            <h3></h3>
            <ul id="genres"></ul>
            <div id="searchbywork">
                <input type="text" id="worksearch" placeholder="Search by name" />
            </div>
            <ul id="works"></ul>
            <ul id="albums"></ul>
        </div>
    </div>
    <div id="notavailable" class="modal">
        <h2>Error</h2>
        <p>Sorry, this recording is not available on Spotify. What a bummer!</p>
        <a href="javascript:$('#notavailable').closeModal()">Close</a>
    </div>
    <div id="premiumneeded" class="modal">
        <h2>Error</h2>
        <p>You need a Spotify Premium subscription to use Concertmaster.<br />(Spotify policy, not ours. Sorry.)</p>
        <p class="modaldetails">You can browse Concertmaster's catalogue, create playlists, favorite works, composers and recordings, but playback is disabled.</p>
        <a href="javascript:$('#premiumneeded').closeModal()">Close</a>
        <a href="https://www.spotify.com/premium/">Subscribe!</a>
    </div>
    <div id="browsernotsupported" class="modal">
        <h2>Error</h2>
        <p>Sorry. Due to Spotify limitations, this browser is not supported. Concertmaster works on Chrome, Firefox and Edge.</p>
        <p class="modaldetails">You can browse Concertmaster's catalogue, create playlists, favorite works, composers and recordings, but playback is disabled.</p>
        <a href="javascript:$('#browsernotsupported').closeModal()">Close</a>
    </div>
    <div id="tuning-modal">
        <h2><span>Tuning...</span></h2>
    </div>
    <div id="lean_overlay"></div>
    <script>
        d = new Date();

        $('#version').html(cmas_options.version);
        $('#year').html(d.getFullYear());
    </script>
    <script type="text/javascript">

            if (window.navigator.appVersion.indexOf('Windows') !== -1) {
                $("body").addClass("windows");
            }

            uagentparser = new UAParser();
            uagent = uagentparser.getResult();

            if (uagent.device.type == 'mobile')
            {
                window.location.assign('/mobile');
            }
            else
            {
                cmas_spotifyauth();
            }

            $('#composersearch').keyup(function () { cmas_composersbysearch($('#composersearch').val()); });
            $('#worksearch').keyup(function () { cmas_worksbysearch(localStorage.lastcomposerid, localStorage.lastgenre, $('#worksearch').val()); });
            $('#library .periods').change(function () { cmas_composersbyepoch($('#library .periods').val()); });
            $('#favtitle select').change(function () { cmas_playlist($('#favtitle select').val()); });

            $('#nowplaying #composer form').on("submit", function (event) {
                    event.preventDefault();
                    cmas_editingcomposer();
                });
    </script>
    <script type="text/javascript">
        $('#composers').mousewheel(function (event, delta) {
            this.scrollLeft -= (delta * 30);
            event.preventDefault();
        });
    </script>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-89195986-1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());

        gtag('config', 'UA-89195986-1');
    </script>
    </body>
</html>
